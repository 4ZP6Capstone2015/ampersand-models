SERVICE Asset1(eigenaar,acceptabelRestrisico) : I[Asset]
 = [ manager     : eigenaar
   , "accepted status"   : acceptabelRestrisico
   , "manually accepted"  : acceptabelRestrisico
   , obligations : verplichtingVan~
   ]

SERVICE Assets1(eigenaar,acceptabelRestrisico) : I[ONE]
   = [ Assets : V[ONE*Asset]
     = [ manager     : eigenaar
     , accepted    : acceptabelRestrisico
     , obligations : verplichtingVan~
   ] ]

SERVICE Assets2 (acceptabelRestrisico): I[Asset];-acceptabelRestrisico
 = [ accepted    : acceptabelRestrisico
   , obligations : verplichtingVan~
   ]

------------------------
--!GMI: simple3.adl is waar ik het meest mee getest heb. cmd: adl --theme=student -p simple3
PROCESS "ELMTest"
ROLE AssetOwner EDITS acceptabelRestrisico, acceptabelRisico
ROLE AssetOwner USES decideAssetRisks, decideObligationRisks, decideAllRisks
ROLE SecurityOfficer EDITS risicoInschatting
ROLE SecurityOfficer USES decideAllRisks,estimateRisk1,estimateRisk2,estimateRisk3
ENDPROCESS

SERVICE decideAssetRisks (acceptabelRestrisico): I[Asset];-acceptabelRestrisico
 = [ accepted    : acceptabelRestrisico
   , obligations : verplichtingVan~
   ]

SERVICE decideObligationRisks (acceptabelRisico): I[Verplichting]
 = [ risk       : risicoInschatting
   , accepted   : acceptabelRisico
   ]

SERVICE decideAllRisks (acceptabelRestrisico, acceptabelRisico): I[Asset];-acceptabelRestrisico
 = [ accepted  : acceptabelRestrisico
   , obligations : verplichtingVan~
   = [ risk       : risicoInschatting
     , accepted   : acceptabelRisico
   ] ]

SERVICE estimateRisk1 (risicoInschatting): I[Asset]
 = [  accepted  : acceptabelRestrisico
   , obligations : verplichtingVan~
   ]

SERVICE estimateRisk2 (risicoInschatting): I[Verplichting]
 = [ risk       : risicoInschatting
   , accepted   : acceptabelRisico
   ]

SERVICE estimateRisk3 (risicoInschatting): I[Asset]
 = [ accepted  : acceptabelRestrisico
   , obligations : verplichtingVan~
   = [ risk       : risicoInschatting
     , accepted   : acceptabelRisico
   ] ]

------------------------

-- Test populations

-- First Asset
POPULATION eigenaar[Asset*Persoon]               CONTAINS [ ("Asset 1", "Puk") ]
POPULATION verplichtingVan[Verplichting*Asset]   CONTAINS [ ("O1a", "Asset 1") ]
POPULATION verplichtingVan[Verplichting*Asset]   CONTAINS [ ("O1b", "Asset 1") ]
POPULATION risicoInschatting[Verplichting*LMHWaarde]   CONTAINS [ ("O1a", "H") ]

-- Second Asset
POPULATION eigenaar[Asset*Persoon]               CONTAINS [ ("Asset 2", "Jansen") ]
POPULATION acceptabelRestrisico[Asset*Asset]   CONTAINS [ ("Asset 2", "Asset 2") ]
--POPULATION acceptabelRestrisico[Asset*Asset]         CONTAINS [ ("Asset 2", "Asset 2") ]
POPULATION verplichtingVan[Verplichting*Asset]   CONTAINS [ ("O2a", "Asset 2") ]
POPULATION risicoInschatting[Verplichting*LMHWaarde]   CONTAINS [ ("O2a", "M") ]
POPULATION verplichtingVan[Verplichting*Asset]   CONTAINS [ ("O2b", "Asset 2") ]
POPULATION acceptabelRisico[Verplichting*Verplichting]    CONTAINS [ ("O2b", "O2b") ]
--POPULATION risicoGeaccepteerd[Verplichting*Verplichting] CONTAINS [ ("O2b", "O2b") ]

-- Third Asset
POPULATION eigenaar[Asset*Persoon]               CONTAINS [ ("Asset 3", "Puk") ]
--POPULATION acceptabelRestrisico[Asset*Asset]         CONTAINS [ ("Asset 3", "Asset 3") ]
POPULATION verplichtingVan[Verplichting*Asset]   CONTAINS [ ("O3a", "Asset 3") ]
POPULATION risicoInschatting[Verplichting*LMHWaarde]   CONTAINS [ ("O3a", "L") ]
--POPULATION risicoGeaccepteerd[Verplichting*Verplichting] CONTAINS [ ("O3a", "O3a") ]

-- Fourth Asset
POPULATION eigenaar[Asset*Persoon]       CONTAINS [ ("Asset 4", "Klaasen") ]


